<!DOCTYPE html>
<html lang="zh-CN">
<head>
<!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<meta name="format-detection" content="telephone=no">
<meta name="author" content="Htime">


    
    


<meta name="description" content="忙时专注，闲时自省，切勿忙无章法，闲生杂念">
<meta property="og:type" content="website">
<meta property="og:title" content="HTime">
<meta property="og:url" content="http://blog.zeyu0633.com/page/2/index.html">
<meta property="og:site_name" content="HTime">
<meta property="og:description" content="忙时专注，闲时自省，切勿忙无章法，闲生杂念">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="HTime">
<meta name="twitter:description" content="忙时专注，闲时自省，切勿忙无章法，闲生杂念">

<link rel="apple-touch-icon" href="/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="HTime" type="application/atom+xml">



    <link rel="shortcut icon" href="/img/favicon.ico">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">


    <style> .article { opacity: 0;} </style>


<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>HTime</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: true,
        isPost: false,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: undefined
    }
</script>


    <script> yiliaConfig.jquery_ui = [false]; </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






</head></html>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/avatar.jpg" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">Htime</a></h1>
        </hgroup>

        
        <p class="header-subtitle">其实，不仅仅是CURD</p>
        

        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa StackOverflow" href="https://my.oschina.net/u/2929131/blog" title="StackOverflow"></a>
                            
                                <a class="fa GitHub" href="https://github.com/xiaoning0810" title="GitHub"></a>
                            
                                <a class="fa RSS" href="http://blog.zeyu0633.com/" title="RSS"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Javar必知必会/">Javar必知必会</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/技能/">技能</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/鸡汤/">鸡汤</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="http://blog.zeyu0633.com/">HTime</a>
                    
                      <a class="main-nav-link switch-friends-link" href="http://carambola.coding.me/mixjuice">Mixjuice&#39;s Notes</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">希望这里能被你看到的是真的我</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">Htime</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/avatar.jpg" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">Htime</a></h1>
            </hgroup>
            
            <p class="header-subtitle">其实，不仅仅是CURD</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa StackOverflow" target="_blank" href="https://my.oschina.net/u/2929131/blog" title="StackOverflow"></a>
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/xiaoning0810" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="http://blog.zeyu0633.com/" title="RSS"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我">
</nav>
      <div class="body-wrap"><article id="post-ze-Summary" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/03/12/ze-Summary/" class="article-date">
      <time datetime="2017-03-12T02:00:00.000Z" itemprop="datePublished">2017-03-12</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        <h1 itemprop="name">
      <a class="article-title" href="/2017/03/12/ze-Summary/">正则表达式 概要</a>
    </h1>
      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><ul>
<li>什么是正则表达式<blockquote>
<p>在编写处理字符串的程序或网页时，经常会有查找符合某些复杂规则的字符串的需要。正则表达式就是用于描述这些规则的工具。换句话说，<font color="#0099ff" face="STCAIYUN" size="4">正则表达式就是记录文本规则的代码</font>。</p>
</blockquote>
</li>
<li>正则表达式入门<blockquote>
<p>假设你在一篇英文小说里查找on，你可以使用正则表达式<font color="#B22222">on</font>，下面详解。</p>
</blockquote>
</li>
<li>正则表达式测试<blockquote>
<p>推荐两个在线测试正则表达式的工具:</p>
<ul>
<li><a href="http://tool.oschina.net/regex/" target="_blank" rel="external">正则表达式在线测试</a></li>
<li><a href="http://www.sojson.com/regex/" target="_blank" rel="external">正则表达式在线测试</a></li>
</ul>
</blockquote>
</li>
</ul>
<h2 id="入门小栗子"><a href="#入门小栗子" class="headerlink" title="入门小栗子"></a>入门小栗子</h2><h3 id="要实现在一篇英文小说里查找on"><a href="#要实现在一篇英文小说里查找on" class="headerlink" title="要实现在一篇英文小说里查找on"></a>要实现在一篇英文小说里查找on</h3><blockquote>
<p>Back in 2000, when I thought I was going to be a professional writer, I spent hours a day on LiveJournal doing writing practice with other aspiring poets and authors. Since then I’ve blogged at three different domains about web standards, print design, photography, Flash, illustration, information architecture, ColdFusion, package management, PHP, CSS, advertising, Ruby, Rails, and Erlang.</p>
</blockquote>
<h3 id="写法以及延伸"><a href="#写法以及延伸" class="headerlink" title="写法以及延伸"></a>写法以及延伸</h3><blockquote>
<p>可以使用正则表达式<font color="#B22222">on</font><br>精确匹配这样的字符串：由两个字符组成，前一个字符是o,后一个是n。<br>不幸的是，很多单词里包含on这两个连续的字符，比如professional,information等等。用on来查找的话，这里边的on也会被找出来<br>如果要精确地查找on这个单词的话，我们应该使用<font color="#B22222">\bon\b</font>。<br>\b是正则表达式规定的一个特殊代码（好吧，某些人叫它元字符，metacharacter），代表着单词的开头或结尾，也就是单词的分界处。虽然通常英文的单词是由空格，标点符号或者换行来分隔的，但是\b并不匹配这些单词分隔字符中的任何一个，它只匹配一个位置。<br>那么，像<font color="#B22222">\bhi\b.*\bLucy\b</font>，<font color="#B22222">0\d{2}-\d{8}</font>等又代表什么意思呢？<br>慢慢学~~~</p>
</blockquote>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ul>
<li>正则表达式定义了字符串的模式。</li>
<li>正则表达式可以用来搜索、编辑或处理文本。</li>
<li>正则表达式并不仅限于某一种语言，但是在每种语言中有细微的差别。</li>
</ul>
      
    </div>
    
    <div class="article-info article-info-index">
      
      <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/正则表达式/">正则表达式</a>
    </div>
      <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Javar必知必会/">Javar必知必会</a></li></ul>
    </div>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>
  
    <article id="post-mysql-better" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/03/11/mysql-better/" class="article-date">
      <time datetime="2017-03-11T15:00:00.000Z" itemprop="datePublished">2017-03-11</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        <h1 itemprop="name">
      <a class="article-title" href="/2017/03/11/mysql-better/">Mysql Learning Index</a>
    </h1>
      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        
      
    </div>
    
    <div class="article-info article-info-index">
      
      <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/Mysql/">Mysql</a>
    </div>
      <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Javar必知必会/">Javar必知必会</a></li></ul>
    </div>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>
  
    <article id="post-mysql-process" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/03/11/mysql-process/" class="article-date">
      <time datetime="2017-03-11T15:00:00.000Z" itemprop="datePublished">2017-03-11</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        <h1 itemprop="name">
      <a class="article-title" href="/2017/03/11/mysql-process/">Mysql Learning Index</a>
    </h1>
      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        
      
    </div>
    
    <div class="article-info article-info-index">
      
      <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/Mysql/">Mysql</a>
    </div>
      <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Javar必知必会/">Javar必知必会</a></li></ul>
    </div>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>
  
    <article id="post-mysql-basic" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/03/11/mysql-basic/" class="article-date">
      <time datetime="2017-03-11T15:00:00.000Z" itemprop="datePublished">2017-03-11</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        <h1 itemprop="name">
      <a class="article-title" href="/2017/03/11/mysql-basic/">Mysql Learning Index</a>
    </h1>
      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="概要"><a href="#概要" class="headerlink" title="概要"></a>概要</h3><blockquote>
<p>最近看了《MySQL 存储过程编程》这本书，再结合在慕课网上的《与MySQL的零距离接触》教程，决定在这里总结一些内容</p>
</blockquote>
      
    </div>
    
    <div class="article-info article-info-index">
      
      <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/Mysql/">Mysql</a>
    </div>
      <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Javar必知必会/">Javar必知必会</a></li></ul>
    </div>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>
  
    <article id="post-springBootDubbo" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/03/06/springBootDubbo/" class="article-date">
      <time datetime="2017-03-06T15:45:00.000Z" itemprop="datePublished">2017-03-06</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        <h1 itemprop="name">
      <a class="article-title" href="/2017/03/06/springBootDubbo/">SpringBoot 集成Dubbo</a>
    </h1>
      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><blockquote>
<p>我们常常使用 Springboot 暴露 HTTP 服务，并走 JSON 模式。但慢慢量大了，一种 SOA 的治理方案。这样可以暴露出 Dubbo 服务接口，提供给 Dubbo 消费者进行 RPC 调用。<br>优点</p>
<ul>
<li>Dubbo 不单单只是高性能的 RPC 调用框架，更是 SOA 服务治理的一种方案。</li>
<li>远程通信，向本地调用一样调用远程方法。</li>
<li>集群容错</li>
<li>服务自动发现和注册，可平滑添加或者删除服务提供者。</li>
</ul>
<p>列个提纲</p>
<ul>
<li>分讲dubbo-provider和dubbo-consummer工程</li>
<li>结合dubbo-admin管理平台查看服务</li>
</ul>
</blockquote>
<ul>
<li>zk 3.4.6</li>
<li>dubbo 2.8.4</li>
<li>jdk 1.8.0</li>
</ul>
<h3 id="springboot-dubbo-provider"><a href="#springboot-dubbo-provider" class="headerlink" title="springboot-dubbo-provider"></a>springboot-dubbo-provider</h3><blockquote>
<p>配置文件中配置为服务提供者</p>
</blockquote>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">## Dubbo 服务提供者配置</span></div><div class="line">spring.dubbo.application.name=provider</div><div class="line">spring.dubbo.registry.address=zookeeper:<span class="regexp">//</span><span class="number">127.0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">2181</span></div><div class="line">spring.dubbo.protocol.name=dubbo</div><div class="line">spring.dubbo.protocol.port=<span class="number">20880</span></div><div class="line">spring.dubbo.scan=com.htime.dubbo</div></pre></td></tr></table></figure>
<blockquote>
<p>然后实现一个方法，该方法返回一个实体类City，verison可以区分服务版本，调用时能够区分</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 注册为 Dubbo 服务</span></div><div class="line"><span class="meta">@Service</span>(version = <span class="string">"1.0.0"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CityDubboServiceImpl</span> <span class="keyword">implements</span> <span class="title">CityDubboService</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> City <span class="title">findCityByName</span><span class="params">(String cityName)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> City(<span class="number">1L</span>,<span class="number">2L</span>,<span class="string">"日照"</span>,<span class="string">"是Htime的故乡"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>最重要的是要引入依赖</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- Spring Boot Dubbo 依赖 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.dubbo.springboot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-dubbo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;dubbo-spring-boot&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="springboot-dubbo-consummer"><a href="#springboot-dubbo-consummer" class="headerlink" title="springboot-dubbo-consummer"></a>springboot-dubbo-consummer</h3><blockquote>
<p>配置文件中配置为消费者，进行服务的订阅</p>
</blockquote>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">## 避免和 server 工程端口冲突</span></div><div class="line">server.port=<span class="number">8081</span></div><div class="line"></div><div class="line"><span class="comment">## Dubbo 服务消费者配置</span></div><div class="line">spring.dubbo.application.name=consumer</div><div class="line">spring.dubbo.registry.address=zookeeper:<span class="regexp">//</span><span class="number">127.0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">2181</span></div><div class="line">spring.dubbo.scan=com.htime.dubbo</div></pre></td></tr></table></figure>
<blockquote>
<p>实现方法的调用，真的就像调用本地方法一样，很棒！！！</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Component</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CityDubboConsumerService</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Reference</span>(version = <span class="string">"1.0.0"</span>)</div><div class="line">    CityDubboService cityDubboService;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printCity</span><span class="params">()</span> </span>&#123;</div><div class="line">        String cityName=<span class="string">"日照"</span>;</div><div class="line">        City city = cityDubboService.findCityByName(cityName);</div><div class="line">        System.out.println(city.toString());</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>在启动类中直接调用printCity()方法，在控制台中打印出以下内容，那么，就成功了，made it！！！<br><img src="http://upload-images.jianshu.io/upload_images/4943424-18b6d38a0f001c99.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="consummer log"></p>
</blockquote>
<h3 id="dubbo-admin管理平台查看服务"><a href="#dubbo-admin管理平台查看服务" class="headerlink" title="dubbo-admin管理平台查看服务"></a>dubbo-admin管理平台查看服务</h3><blockquote>
<p>管理平台能为我们提供很多功能，我是直接以war包的形式起的，war可以把dubbo官方代码clone下来自己编译</p>
<ul>
<li>服务调用情况、健康情况查看</li>
<li>提供软负载，可以对不同服务设置不同权重</li>
<li>······</li>
</ul>
<p>查看服务提供者<br><img src="http://upload-images.jianshu.io/upload_images/4943424-24246882c8a25a1d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="provider view"></p>
<p>查看服务消费者<br><img src="http://upload-images.jianshu.io/upload_images/4943424-93b5cacc8a175068.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="consummer view"></p>
<p>公司用的是dubbo，自己在学spring-cloud，这里展示dubbo，因为，遇到了坑，还有人问问，如果用spring-cloud直接上，出了问题，一脸懵逼<del>~</del></p>
</blockquote>
      
    </div>
    
    <div class="article-info article-info-index">
      
      <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/SpringBoot/">SpringBoot</a>
    </div>
      <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li></ul>
    </div>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>
  
    <article id="post-springBootAuth" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/03/05/springBootAuth/" class="article-date">
      <time datetime="2017-03-05T15:30:00.000Z" itemprop="datePublished">2017-03-05</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        <h1 itemprop="name">
      <a class="article-title" href="/2017/03/05/springBootAuth/">SpringBoot 身份认证</a>
    </h1>
      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="要完成的事情"><a href="#要完成的事情" class="headerlink" title="要完成的事情"></a>要完成的事情</h3><blockquote>
<p>只有一点，但是很重要，因为http是无状态的，如果我们设计出来的架构不够安全，那么这一系列的操作都是白搭。</p>
<ul>
<li>身份认证</li>
</ul>
</blockquote>
<h2 id="分一个割"><a href="#分一个割" class="headerlink" title="分一个割"></a>分一个割</h2><h3 id="身份验证"><a href="#身份验证" class="headerlink" title="身份验证"></a>身份验证</h3><blockquote>
<p>首先根据City相关操作，实现一个关于User的相关操作，从controller一直到sql，就不上代码了，比较简单<br>整体思路就是在用户登录时生成一个token，然后以后的所有请求，header中都携带这个token，服务器对token进行检验<br>通过AccessTokenVerifyInterceptor，来实现拦截，要避开对auth接口的拦截</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Component</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccessTokenVerifyInterceptor</span> <span class="keyword">extends</span> <span class="title">HandlerInterceptorAdapter</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Autowired</span></div><div class="line">    ValidationService validationService;</div><div class="line"></div><div class="line">    <span class="meta">@Autowired</span></div><div class="line">    UserService userService;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> Logger logger = Logger.getLogger(getClass());</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        logger.info(<span class="string">"AccessToken executing ..."</span>);</div><div class="line">        <span class="keyword">boolean</span> flag = <span class="keyword">false</span>;</div><div class="line">        String requestUrl = request.getRequestURL().toString();</div><div class="line">        <span class="keyword">if</span>(<span class="keyword">null</span> != requestUrl &amp;&amp; requestUrl.contains(<span class="string">"/auth"</span>)) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// token</span></div><div class="line">        String accessToken = request.getHeader(<span class="string">"token"</span>);</div><div class="line">        <span class="keyword">if</span> (StringUtils.isNotBlank(accessToken)) &#123;</div><div class="line">            ValidationModel model = <span class="keyword">new</span> ValidationModel();</div><div class="line"></div><div class="line">            <span class="comment">// 验证token</span></div><div class="line">            Boolean isOk = validationService.verifyAccessToken(accessToken, model);</div><div class="line"></div><div class="line">            <span class="comment">// 用户验证</span></div><div class="line">            <span class="keyword">if</span> (isOk) &#123;</div><div class="line">                User user = userService.getUserById(model.getUid());</div><div class="line">                <span class="keyword">if</span>(user != <span class="keyword">null</span>) &#123;</div><div class="line">                    request.setAttribute(CommonConst.PARAM_USER, user);</div><div class="line">                    logger.info(<span class="string">"AccessToken SUCCESS ...  user:"</span> + user.getUserName() + <span class="string">" - "</span> + accessToken);</div><div class="line">                    flag = <span class="keyword">true</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (!flag) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RcException(CommonRes.RES_NEED_AUTH, <span class="string">"auth fail"</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> flag;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>通过ValidationService，完成对token的操作，包括生成与校验</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Service</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ValidationService</span> </span>&#123;</div><div class="line"></div><div class="line">    Gson gson = GsonUtil.createGson();</div><div class="line"></div><div class="line">    <span class="comment">//生成token</span></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">createToken</span><span class="params">(User user)</span> </span>&#123;</div><div class="line">        Map&lt;String, String&gt; param = <span class="keyword">new</span> HashMap&lt;String, String&gt;();</div><div class="line">        param.put(<span class="string">"user"</span>, user.getUid().toString());</div><div class="line">        param.put(<span class="string">"time"</span>, <span class="keyword">new</span> Date().getTime() + <span class="string">""</span>);</div><div class="line">        String accessToken = gson.toJson(param);</div><div class="line">        <span class="keyword">return</span> accessToken;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//验证token</span></div><div class="line">    <span class="function"><span class="keyword">public</span> Boolean <span class="title">verifyAccessToken</span><span class="params">(String accessToken, ValidationModel model)</span> </span>&#123;</div><div class="line">        Boolean isOk = <span class="keyword">true</span>;</div><div class="line"></div><div class="line">        Map&lt;String, String&gt; param = gson.fromJson(accessToken, <span class="keyword">new</span> TypeToken&lt;HashMap&lt;String, String&gt;&gt;() &#123;&#125;.getType());</div><div class="line">        <span class="keyword">if</span>(<span class="keyword">null</span> == param || <span class="keyword">null</span> == param.get(<span class="string">"user"</span>) || <span class="keyword">null</span> == param.get(<span class="string">"time"</span>))</div><div class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line"></div><div class="line">        <span class="comment">//验证UID</span></div><div class="line">        <span class="keyword">if</span>(!StringUtil.isNumber(param.get(<span class="string">"user"</span>).toString()))</div><div class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">        Long uid = Long.parseLong(param.get(<span class="string">"user"</span>));</div><div class="line">        model.setUid(uid);</div><div class="line"></div><div class="line">        <span class="comment">//验证时间</span></div><div class="line">        Date time = <span class="keyword">new</span> Date(Long.parseLong(param.get(<span class="string">"time"</span>)));</div><div class="line">        Integer days = DateUtil.calculateDays(time, <span class="keyword">new</span> Date());</div><div class="line">        <span class="comment">//token的有效期为1天</span></div><div class="line">        <span class="keyword">if</span>(days &gt; <span class="number">1</span>)</div><div class="line">            isOk = <span class="keyword">false</span>;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> isOk;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>通过WebMvcConfig来配置拦截，对所有请求都拦截</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Configuration</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebMvcConfig</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurerAdapter</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Bean</span></div><div class="line">    <span class="function"><span class="keyword">public</span> AccessTokenVerifyInterceptor <span class="title">tokenVerifyInterceptor</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> AccessTokenVerifyInterceptor();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> </span>&#123;</div><div class="line">        registry.addInterceptor(tokenVerifyInterceptor()).addPathPatterns(<span class="string">"/*"</span>);</div><div class="line">        <span class="keyword">super</span>.addInterceptors(registry);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>通过UserRestController来进行auth操作，都是明文的~~~</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@RestController</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserRestController</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Autowired</span></div><div class="line">    UserService userService;</div><div class="line"></div><div class="line">    <span class="meta">@Autowired</span></div><div class="line">    ValidationService validationService;</div><div class="line"></div><div class="line">    <span class="meta">@RequestMapping</span>(value = <span class="string">"/auth"</span>, method = RequestMethod.GET)</div><div class="line">    <span class="function"><span class="keyword">public</span> UserRes <span class="title">auth</span><span class="params">(</span></span></div><div class="line">            @RequestParam(  value = <span class="string">"userName"</span>,required = <span class="keyword">true</span> ) String userName ,</div><div class="line">            @<span class="title">RequestParam</span><span class="params">(  value = <span class="string">"userPwd"</span>,required = <span class="keyword">true</span> )</span> String userPwd) &#123;</div><div class="line"></div><div class="line">        UserRes res = <span class="keyword">new</span> UserRes();</div><div class="line">        User user = userService.getUserByAccount(userName, userPwd);</div><div class="line">        <span class="keyword">if</span>(<span class="keyword">null</span> == user) &#123;</div><div class="line">             res.setError(CommonRes.RES_NOT_ALLOW, <span class="string">"账号密码错误"</span>);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            res.setUser(user);</div><div class="line">            <span class="comment">//生成token</span></div><div class="line">            String token = validationService.createToken(user);</div><div class="line">            res.setToken(token);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> res;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><blockquote>
<p>首先在不auth的情况下对/hello接口进行访问，我们用postman来进行测试，结果如下，报错啦<br><img src="http://upload-images.jianshu.io/upload_images/4943424-224e533671ec1a90.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="auth fail"></p>
<p>进行auth操作，获取token，我对token的处理很简单粗暴，意思就是这么个意思<br><img src="http://upload-images.jianshu.io/upload_images/4943424-f005157327dafda6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="suth ing"></p>
<p>将token放到header中再对/hello接口进行访问，成功返回，made it！！！<br><img src="http://upload-images.jianshu.io/upload_images/4943424-cb03eb849051fb59.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="auth success"></p>
</blockquote>
<h2 id="分一个割-1"><a href="#分一个割-1" class="headerlink" title="分一个割"></a>分一个割</h2><p>到这里，这个工程就不更新了，接下来与dubbo的集成，将使用新的工程</p>
      
    </div>
    
    <div class="article-info article-info-index">
      
      <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/SpringBoot/">SpringBoot</a>
    </div>
      <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li></ul>
    </div>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>
  
    <article id="post-springBootExceptionAOPLog4j" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/03/05/springBootExceptionAOPLog4j/" class="article-date">
      <time datetime="2017-03-05T01:30:00.000Z" itemprop="datePublished">2017-03-05</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        <h1 itemprop="name">
      <a class="article-title" href="/2017/03/05/springBootExceptionAOPLog4j/">SpringBoot 日志管理，统一异常处理</a>
    </h1>
      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="要完成的事情"><a href="#要完成的事情" class="headerlink" title="要完成的事情"></a>要完成的事情</h3><blockquote>
<p>主要分为以下两点</p>
<ul>
<li>统一异常处理</li>
<li>集成Log4j AOP统一处理web请求</li>
</ul>
</blockquote>
<h2 id="分一个割"><a href="#分一个割" class="headerlink" title="分一个割"></a>分一个割</h2><h3 id="统一异常处理"><a href="#统一异常处理" class="headerlink" title="统一异常处理"></a>统一异常处理</h3><blockquote>
<p>在服务上提供接口，为了统一状态，我们最好定义一个固定的格式来返回一些状态信息,定义一个CommonRes类</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CommonRes</span>  <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">6094615237599920640L</span>;</div><div class="line">    </div><div class="line">    <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">public</span> <span class="keyword">int</span> RES_OK 					= <span class="number">0</span> ;</div><div class="line">    <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">public</span> <span class="keyword">int</span> RES_UNKNOW_ERROR 		= <span class="number">1000</span> ;</div><div class="line">    <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">public</span> <span class="keyword">int</span> RES_UNSUPPORT 			= <span class="number">1001</span> ;</div><div class="line">    <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">public</span> <span class="keyword">int</span> RES_INVALID_PARAM 		= <span class="number">1002</span> ;</div><div class="line">    <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">public</span> <span class="keyword">int</span> RES_DAOEXCEPTION 		= <span class="number">1003</span> ;</div><div class="line">    <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">public</span> <span class="keyword">int</span> RES_RUNTIME_EXCEPTION 	= <span class="number">1004</span> ;</div><div class="line">    <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">public</span> <span class="keyword">int</span> RES_NO_RIGHT 			= <span class="number">1005</span> ;</div><div class="line">    <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">public</span> <span class="keyword">int</span> RES_NEED_SIGNIN 		= <span class="number">1006</span> ;</div><div class="line">    <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">public</span> <span class="keyword">int</span> RES_AUTH_FAILED 		= <span class="number">1007</span> ;</div><div class="line">    <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">public</span> <span class="keyword">int</span> RES_INVALID_TOKEN 		= <span class="number">1008</span> ;</div><div class="line">    <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">public</span> <span class="keyword">int</span> RES_NEED_AUTH 			= <span class="number">1009</span> ;</div><div class="line">    <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">public</span> <span class="keyword">int</span> RES_TIMEOUT 			= <span class="number">1010</span> ;</div><div class="line">    <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">public</span> <span class="keyword">int</span> RES_NOT_ALLOW 			= <span class="number">1011</span> ;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> Integer rc = RES_OK;</div><div class="line">    <span class="keyword">private</span> String msgInfo;			<span class="comment">//client show info tip</span></div><div class="line">    <span class="keyword">private</span> String errorInfo ; 		<span class="comment">//client show error tip</span></div><div class="line">    <span class="keyword">private</span> String redirect ; 		<span class="comment">//the redirected api server</span></div><div class="line">    <span class="keyword">private</span> String redirectSign ; 	<span class="comment">// the the signture of redirect</span></div><div class="line">    <span class="keyword">private</span> Integer ccdVersion ; 	<span class="comment">// the client configure data version ;</span></div><div class="line">    <span class="keyword">private</span> String requestUrl;      <span class="comment">// request url</span></div><div class="line">    <span class="keyword">private</span> Date serverTime ; 		<span class="comment">//the server current system time</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> CommonRes <span class="title">retOK</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> CommonRes();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> CommonRes <span class="title">retError</span><span class="params">(<span class="keyword">int</span> errorType,String errorInfo)</span> </span>&#123;</div><div class="line">        CommonRes commonRes= <span class="keyword">new</span> CommonRes();</div><div class="line">        commonRes.rc=errorType;</div><div class="line">        commonRes.errorInfo=errorInfo;</div><div class="line">        <span class="keyword">return</span> commonRes;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="comment">//省略get&amp;set方法</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>创建一个自定义异常</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RcException</span> <span class="keyword">extends</span> <span class="title">Exception</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">protected</span> Integer rc;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getRc</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> rc;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRc</span><span class="params">(Integer rc)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.rc = rc;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RcException</span><span class="params">(String message)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(message);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RcException</span><span class="params">(<span class="keyword">int</span> rc,String info)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(info);</div><div class="line">        <span class="keyword">this</span>.setRc(rc);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>为RcException和Exception异常创建对应的处理</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@ControllerAdvice</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GlobalExceptionHandler</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@ExceptionHandler</span>(value = RcException.class)</div><div class="line">    <span class="meta">@ResponseBody</span></div><div class="line">    <span class="function"><span class="keyword">public</span> CommonRes <span class="title">jsonSelfErrorHandler</span><span class="params">(HttpServletRequest req, RcException e)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        CommonRes res = <span class="keyword">new</span> CommonRes();</div><div class="line">        <span class="keyword">if</span>(<span class="keyword">null</span> == e.getRc())</div><div class="line">            res.setRc(CommonRes.RES_RUNTIME_EXCEPTION);</div><div class="line">        <span class="keyword">else</span></div><div class="line">            res.setRc(e.getRc());</div><div class="line">        res.setErrorInfo(e.getMessage());</div><div class="line">        res.setServerTime(<span class="keyword">new</span> Date());</div><div class="line">        res.setRequestUrl(req.getRequestURL().toString());</div><div class="line">        <span class="keyword">return</span> res;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@ExceptionHandler</span>(value = Exception.class)</div><div class="line">    <span class="meta">@ResponseBody</span></div><div class="line">    <span class="function"><span class="keyword">public</span> CommonRes <span class="title">jsonErrorHandler</span><span class="params">(HttpServletRequest req, Exception e)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        CommonRes res = <span class="keyword">new</span> CommonRes();</div><div class="line">        res.setRc(CommonRes.RES_RUNTIME_EXCEPTION);</div><div class="line">        res.setErrorInfo(e.getMessage());</div><div class="line">        res.setServerTime(<span class="keyword">new</span> Date());</div><div class="line">        res.setRequestUrl(req.getRequestURL().toString());</div><div class="line">        <span class="keyword">return</span> res;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>进行测试</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@RestController</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloRestController</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> Logger logger = Logger.getLogger(getClass());</div><div class="line"></div><div class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/hello"</span>)</div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        logger.info(<span class="string">"HelloRestController hello"</span>);</div><div class="line">        <span class="keyword">return</span> <span class="string">"Hello World!"</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/hello/1"</span>)</div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello1</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"runtime 异常"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/hello/2"</span>)</div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello2</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RcException(<span class="string">"使用默认的error code"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/hello/3"</span>)</div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello3</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RcException(CommonRes.RES_DAOEXCEPTION, <span class="string">"指定error code"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>我们访问hello1(),hello2(),hello3(),可以看到已经成功捕获了我们定义的异常<br><img src="http://upload-images.jianshu.io/upload_images/4943424-7c5bbde67a1d5356.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="exception"></p>
<h3 id="集成log4j与用AOP统一处理web请求"><a href="#集成log4j与用AOP统一处理web请求" class="headerlink" title="集成log4j与用AOP统一处理web请求"></a>集成log4j与用AOP统一处理web请求</h3><blockquote>
<p>需要引入依赖</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- Spring Boot Web 依赖 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j-over-slf4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- log4j 日志 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- AOP 依赖 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p>src/main/resources目录下加入log4j.properties配置文件，配置日志级别为INFO，并在控制台和文件中进行输出</p>
</blockquote>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># LOG4J配置</span></div><div class="line">log4j.rootCategory=INFO, stdout, file</div><div class="line"><span class="comment"># 控制台输出</span></div><div class="line">log4j.appender.stdout=org.apache.log4j.ConsoleAppender</div><div class="line">log4j.appender.stdout.layout=org.apache.log4j.PatternLayout</div><div class="line">log4j.appender.stdout.layout.ConversionPattern=%d&#123;yyyy-MM-dd HH:mm:ss,SSS&#125; %5p %c<span class="string">&#123;1&#125;</span>:%L - %m%n</div><div class="line"><span class="comment"># root日志输出</span></div><div class="line">log4j.appender.file=org.apache.log4j.DailyRollingFileAppender</div><div class="line">log4j.appender.file.file=logs/all.log</div><div class="line">log4j.appender.file.DatePattern=<span class="string">'.'</span>yyyy-MM-dd</div><div class="line">log4j.appender.file.layout=org.apache.log4j.PatternLayout</div><div class="line">log4j.appender.file.layout.ConversionPattern=%d&#123;yyyy-MM-dd HH:mm:ss,SSS&#125; %5p %c<span class="string">&#123;1&#125;</span>:%L - %m%n</div></pre></td></tr></table></figure>
<p>以上就完成了对log4j的全部配置，程序中就可以使用啦<br>接下来在用AOP同一处理WEB请求中演示log4j的使用</p>
<blockquote>
<p>在application.properties配置，需要使用CGLIB来实现AOP的时候，需要配置spring.aop.proxy-target-class=true，不然默认使用的是标准Java的实现。</p>
</blockquote>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># AOP</span></div><div class="line"><span class="comment"># Add @EnableAspectJAutoProxy.</span></div><div class="line">spring.aop.auto=true</div><div class="line"><span class="comment"># Whether subclass-based (CGLIB) proxies are to be created (true) as opposed to standard Java interface-based proxies (false).</span></div><div class="line">spring.aop.proxy-target-class=false</div></pre></td></tr></table></figure>
<blockquote>
<p>新建一个类RequestLogAspect来进行切面逻辑的处理</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Aspect</span></div><div class="line"><span class="meta">@Order</span>(<span class="number">5</span>)</div><div class="line"><span class="meta">@Component</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RequestLogAspect</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> Logger logger = Logger.getLogger(getClass());</div><div class="line"></div><div class="line">    ThreadLocal&lt;Long&gt; startTime = <span class="keyword">new</span> ThreadLocal&lt;&gt;();<span class="comment">//记录请求消耗的时间</span></div><div class="line"></div><div class="line">    <span class="meta">@Pointcut</span>(<span class="string">"execution(public * com.htime.controller..*.*(..))"</span>)</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">requestLog</span><span class="params">()</span></span>&#123;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Before</span>(<span class="string">"requestLog()"</span>)</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doBefore</span><span class="params">(JoinPoint joinPoint)</span> <span class="keyword">throws</span> Throwable </span>&#123;</div><div class="line">        startTime.set(System.currentTimeMillis());</div><div class="line">        <span class="comment">// 接收到请求，记录请求内容</span></div><div class="line">        ServletRequestAttributes attributes = (ServletRequestAttributes) RequestContextHolder.getRequestAttributes();</div><div class="line">        HttpServletRequest request = attributes.getRequest();</div><div class="line">        <span class="comment">// 记录下请求内容</span></div><div class="line">        logger.info(<span class="string">"URL : "</span> + request.getRequestURL().toString());</div><div class="line">        logger.info(<span class="string">"HTTP_METHOD : "</span> + request.getMethod());</div><div class="line">        logger.info(<span class="string">"IP : "</span> + request.getRemoteAddr());</div><div class="line">        logger.info(<span class="string">"CLASS_METHOD : "</span> + joinPoint.getSignature().getDeclaringTypeName() + <span class="string">"."</span> + joinPoint.getSignature().getName());</div><div class="line">        logger.info(<span class="string">"ARGS : "</span> + Arrays.toString(joinPoint.getArgs()));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@AfterReturning</span>(returning = <span class="string">"ret"</span>, pointcut = <span class="string">"requestLog()"</span>)</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doAfterReturning</span><span class="params">(Object ret)</span> <span class="keyword">throws</span> Throwable </span>&#123;</div><div class="line">        <span class="comment">// 处理完请求，返回内容</span></div><div class="line">        logger.info(<span class="string">"RESPONSE : "</span> + ret);</div><div class="line">        logger.info(<span class="string">"SPEND TIME : "</span> + (System.currentTimeMillis() - startTime.get()) + <span class="string">" ms"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这时，在对接口进行请求，在console中可以看到打印出如下内容<br><img src="http://upload-images.jianshu.io/upload_images/4943424-7093fc3c5a6b5111.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="swagger main"></p>
<h3 id="目前的工程结构"><a href="#目前的工程结构" class="headerlink" title="目前的工程结构"></a>目前的工程结构</h3><p>清晰很重要<br><img src="http://upload-images.jianshu.io/upload_images/4943424-3685ac162ce9a55b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="structure"></p>
<h2 id="分一个割-1"><a href="#分一个割-1" class="headerlink" title="分一个割"></a>分一个割</h2><p>接下来的内容是登录认证与权限控制</p>
      
    </div>
    
    <div class="article-info article-info-index">
      
      <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/SpringBoot/">SpringBoot</a>
    </div>
      <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li></ul>
    </div>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>
  
    <article id="post-springBootMybatisSwagger" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/03/04/springBootMybatisSwagger/" class="article-date">
      <time datetime="2017-03-04T11:30:00.000Z" itemprop="datePublished">2017-03-04</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        <h1 itemprop="name">
      <a class="article-title" href="/2017/03/04/springBootMybatisSwagger/">SpringBoot Mybatis Restful Swagger2</a>
    </h1>
      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="要完成的事情"><a href="#要完成的事情" class="headerlink" title="要完成的事情"></a>要完成的事情</h3><blockquote>
<p>主要分为以下三点</p>
<ul>
<li>Mybatis集成</li>
<li>Restful接口提供</li>
<li>Swagger2集成</li>
</ul>
</blockquote>
<h2 id="分一个割"><a href="#分一个割" class="headerlink" title="分一个割"></a>分一个割</h2><h3 id="工程结构"><a href="#工程结构" class="headerlink" title="工程结构"></a>工程结构</h3><p>工程结构尽量做到清晰，分层合理<br><img src="http://upload-images.jianshu.io/upload_images/4943424-2f4d1f94c3582730.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="structure"></p>
<h3 id="springboot集成Mybatis"><a href="#springboot集成Mybatis" class="headerlink" title="springboot集成Mybatis"></a>springboot集成Mybatis</h3><p>pom文件中需引入</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- Spring Boot Mybatis 依赖 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mybatis-spring-boot&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- MySQL 连接驱动依赖 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mysql-connector&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div></pre></td></tr></table></figure>
<p>在application.properties中配置<br><figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">## 数据源配置</span></div><div class="line">spring.datasource.url=jdbc:mysql:<span class="regexp">//localhost</span>:<span class="number">3306</span>/springbootdb?useUnicode=true&amp;characterEncoding=utf8</div><div class="line">spring.datasource.username=root</div><div class="line">spring.datasource.password=ning081<span class="number">0</span></div><div class="line">spring.datasource.driver-class-name=com.mysql.jdbc.Driver</div><div class="line"></div><div class="line"><span class="comment">## Mybatis 配置</span></div><div class="line">mybatis.typeAliasesPackage=com.htime.domain</div><div class="line">mybatis.mapperLocations=classpath:mapper/*.xml</div></pre></td></tr></table></figure></p>
<p>application.properties中已经指定了实体类和xml的扫描位置，还有dao层的扫描需要配置，需要在启动类中指定</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@SpringBootApplication</span></div><div class="line"><span class="comment">// mapper 接口类扫描包配置</span></div><div class="line"><span class="meta">@MapperScan</span>(<span class="string">"com.htime.dao"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringbootLearningApplication</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        <span class="comment">// 程序启动入口</span></div><div class="line">        <span class="comment">// 启动嵌入式的 Tomcat 并初始化 Spring 环境及其各 Spring 组件</span></div><div class="line">        SpringApplication.run(SpringbootLearningApplication.class, args);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="springboot提供Restful接口"><a href="#springboot提供Restful接口" class="headerlink" title="springboot提供Restful接口"></a>springboot提供Restful接口</h3><p>集成restful接口就比较简单啦，只需要在加上类注解@RestController，然后不同的api的指定遵循rest方式，代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by HTime on 2017/3/3.</div><div class="line"> */</div><div class="line"><span class="meta">@RestController</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CityResController</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Autowired</span></div><div class="line">    <span class="keyword">private</span> CityService cityService;</div><div class="line"></div><div class="line">    <span class="meta">@ApiOperation</span>(value=<span class="string">"获取城市详细信息"</span>, notes=<span class="string">"根据城市ID来获取城市详细信息"</span>)</div><div class="line">    <span class="meta">@ApiImplicitParam</span>(name = <span class="string">"id"</span>, value = <span class="string">"城市ID"</span>, required = <span class="keyword">true</span>, dataType = <span class="string">"Long"</span>)</div><div class="line">    <span class="meta">@RequestMapping</span>(value = <span class="string">"/api/city/&#123;id&#125;"</span>, method = RequestMethod.GET)</div><div class="line">    <span class="function"><span class="keyword">public</span> City <span class="title">findOneCity</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> Long id) </span>&#123;</div><div class="line">        <span class="keyword">return</span> cityService.findCityById(id);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@ApiOperation</span>(value=<span class="string">"获取所有城市"</span>, notes=<span class="string">"获取所有城市信息"</span>)</div><div class="line">    <span class="meta">@RequestMapping</span>(value = <span class="string">"/api/city"</span>, method = RequestMethod.GET)</div><div class="line">    <span class="function"><span class="keyword">public</span> List&lt;City&gt; <span class="title">findAllCity</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> cityService.findAllCity();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@ApiOperation</span>(value=<span class="string">"创建城市"</span>, notes=<span class="string">"根据City实体创建城市"</span>)</div><div class="line">    <span class="meta">@ApiImplicitParam</span>(name = <span class="string">"city"</span>, value = <span class="string">"城市详细实体city"</span>, required = <span class="keyword">true</span>, dataType = <span class="string">"City"</span>)</div><div class="line">    <span class="meta">@RequestMapping</span>(value = <span class="string">"/api/city"</span>, method = RequestMethod.POST)</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">createCity</span><span class="params">(@RequestBody City city)</span> </span>&#123;</div><div class="line">        cityService.saveCity(city);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@ApiOperation</span>(value=<span class="string">"更新城市"</span>, notes=<span class="string">"根据传过来的City实体对是实体中的City ID进行更新"</span>)</div><div class="line">    <span class="meta">@ApiImplicitParams</span>(&#123;</div><div class="line">            <span class="meta">@ApiImplicitParam</span>(name = <span class="string">"id"</span>, value = <span class="string">"城市ID"</span>, required = <span class="keyword">true</span>, dataType = <span class="string">"Long"</span>),</div><div class="line">            <span class="meta">@ApiImplicitParam</span>(name = <span class="string">"city"</span>, value = <span class="string">"城市详细实体city"</span>, required = <span class="keyword">true</span>, dataType = <span class="string">"City"</span>)</div><div class="line">    &#125;)</div><div class="line">    <span class="meta">@RequestMapping</span>(value = <span class="string">"/api/city/&#123;id&#125;"</span>, method = RequestMethod.PUT)</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">modifyCity</span><span class="params">(@PathVariable Long id, @RequestBody City city)</span> </span>&#123;</div><div class="line">        City c = cityService.findCityById(id);</div><div class="line">        c.setCityName(city.getCityName());</div><div class="line">        c.setDescription(city.getDescription());</div><div class="line">        c.setProvinceId(city.getProvinceId());</div><div class="line">        cityService.updateCity(c);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@ApiOperation</span>(value=<span class="string">"删除城市"</span>, notes=<span class="string">"根据指定的城市ID来删除城市"</span>)</div><div class="line">    <span class="meta">@ApiImplicitParam</span>(name = <span class="string">"id"</span>, value = <span class="string">"城市ID"</span>, required = <span class="keyword">true</span>, dataType = <span class="string">"Long"</span>)</div><div class="line">    <span class="meta">@RequestMapping</span>(value = <span class="string">"/api/city/&#123;id&#125;"</span>, method = RequestMethod.DELETE)</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteCity</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> Long id) </span>&#123;</div><div class="line">        cityService.deleteCity(id);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="springboot集成Swagger2"><a href="#springboot集成Swagger2" class="headerlink" title="springboot集成Swagger2"></a>springboot集成Swagger2</h3><p>目前大多数开发都是前后端完全分离，这样的工作模式需要有很好的开发文档的支撑，swagger2就为我们提供啦这个功能<br>先看看swagger为我们提供了一个怎样的文档形式<br><img src="http://upload-images.jianshu.io/upload_images/4943424-97579134276c2413.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="swagger main"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/4943424-c58f8f779d9e92e6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="swagger detail"></p>
<p>首先我们需要引入依赖<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- Swagger2 RESTful API文档 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>定义一个和Application同级的类Swagger2</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Configuration</span></div><div class="line"><span class="meta">@EnableSwagger</span>2</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Swagger2</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Bean</span></div><div class="line">    <span class="function"><span class="keyword">public</span> Docket <span class="title">createRestApi</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Docket(DocumentationType.SWAGGER_2)</div><div class="line">                .apiInfo(apiInfo())</div><div class="line">                .select()</div><div class="line">                .apis(RequestHandlerSelectors.basePackage(<span class="string">"com.htime.controller"</span>))</div><div class="line">                .paths(PathSelectors.any())</div><div class="line">                .build();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> ApiInfo <span class="title">apiInfo</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ApiInfoBuilder()</div><div class="line">                .title(<span class="string">"Htime API 文档"</span>)</div><div class="line">                .description(<span class="string">"更多内容请关注：http://blog.zeyu0633.com/"</span>)</div><div class="line">                .termsOfServiceUrl(<span class="string">"http://blog.zeyu0633.com/"</span>)</div><div class="line">                .contact(<span class="string">"Htime"</span>)</div><div class="line">                .version(<span class="string">"1.0"</span>)</div><div class="line">                .build();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>然后就是在你的接口函数上用注解的形式对你的接口进项相关描述，具体可以在以上restful那一块的代码中查看</p>
<h2 id="分一个割-1"><a href="#分一个割-1" class="headerlink" title="分一个割"></a>分一个割</h2><p>接下来的内容是日志管理和统一异常管理~~~</p>
      
    </div>
    
    <div class="article-info article-info-index">
      
      <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/SpringBoot/">SpringBoot</a>
    </div>
      <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li></ul>
    </div>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>
  
    <article id="post-springBootStart" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/02/26/springBootStart/" class="article-date">
      <time datetime="2017-02-26T11:30:00.000Z" itemprop="datePublished">2017-02-26</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        <h1 itemprop="name">
      <a class="article-title" href="/2017/02/26/springBootStart/">SpringBoot HelloWorld</a>
    </h1>
      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="开发环境"><a href="#开发环境" class="headerlink" title="开发环境"></a>开发环境</h2><blockquote>
<p>版本这东西，说不清道不明</p>
<ul>
<li>开发工具：IntelliJ IDEA 2016.3.4</li>
<li>Java version：1.8.8_101</li>
<li>maven version： 3.3.3</li>
</ul>
</blockquote>
<h2 id="开始创世纪"><a href="#开始创世纪" class="headerlink" title="开始创世纪"></a>开始创世纪</h2><h3 id="新建工程"><a href="#新建工程" class="headerlink" title="新建工程"></a>新建工程</h3><p>直接使用idea方式新建工程<br><img src="http://upload-images.jianshu.io/upload_images/4943424-69f817e5b7cc0144.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="new"><br>新建完毕，idea中会生成如下工程结构<br><img src="http://upload-images.jianshu.io/upload_images/4943424-d379ea5a6680c516.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="structure"></p>
<h3 id="POM文件"><a href="#POM文件" class="headerlink" title="POM文件"></a>POM文件</h3><p>增加依赖如下<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- WEB --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h3 id="SpringBoot启动"><a href="#SpringBoot启动" class="headerlink" title="SpringBoot启动"></a>SpringBoot启动</h3><p>除了以下这种直接启动，还可以mvn方式和jar方式<br><img src="http://upload-images.jianshu.io/upload_images/4943424-2f301d754ea8b736.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="start"></p>
<h3 id="Controller层代码"><a href="#Controller层代码" class="headerlink" title="Controller层代码"></a>Controller层代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by HTime on 2017/2/26.</div><div class="line"> */</div><div class="line"><span class="meta">@RestController</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@RequestMapping</span>(value = <span class="string">"/hello"</span>, method = RequestMethod.GET)</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sayHello</span><span class="params">()</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"Hello World!"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Junit测试"><a href="#Junit测试" class="headerlink" title="Junit测试"></a>Junit测试</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@RunWith</span>(SpringJUnit4ClassRunner.class)</div><div class="line"><span class="meta">@WebAppConfiguration</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringbootApplicationTests</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">//模拟mvc对象类.</span></div><div class="line">    <span class="keyword">private</span> MockMvc mvc;</div><div class="line"></div><div class="line">    <span class="meta">@Before</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUp</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        mvc = MockMvcBuilders.standaloneSetup(<span class="keyword">new</span> HelloController()).build();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getHello</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        mvc.perform(MockMvcRequestBuilders.get(<span class="string">"/hello"</span>).accept(MediaType.APPLICATION_JSON))</div><div class="line">                .andExpect(status().isOk())</div><div class="line">                .andExpect(content().string(equalTo(<span class="string">"Hello World!"</span>)));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>运行getHello()可以在Console中打印出 “Hello World!”</p>
      
    </div>
    
    <div class="article-info article-info-index">
      
      <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/SpringBoot/">SpringBoot</a>
    </div>
      <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li></ul>
    </div>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>
  
    <article id="post-markdown" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/02/26/markdown/" class="article-date">
      <time datetime="2017-02-26T09:58:27.000Z" itemprop="datePublished">2017-02-26</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        <h1 itemprop="name">
      <a class="article-title" href="/2017/02/26/markdown/">Markdown 语法</a>
    </h1>
      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="区块"><a href="#区块" class="headerlink" title="区块"></a>区块</h2><h3 id="标题"><a href="#标题" class="headerlink" title="标题"></a>标题</h3><p>我是一段文字1</p>
<p>我是第二段文字2</p>
<p>我是第三段文字3</p>
<h3 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h3><blockquote>
<p><strong>忙时专注，闲时自省，警惕忙无章法，闲生杂念</strong></p>
<blockquote>
<p>忙时专注，闲时自省，警惕忙无章法，闲生杂念</p>
<ul>
<li>吃饭</li>
<li>睡觉</li>
<li>打豆豆</li>
</ul>
</blockquote>
</blockquote>
<h3 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h3><ul>
<li>列表一</li>
<li>列表二</li>
<li>列表三</li>
</ul>
<h3 id="文字"><a href="#文字" class="headerlink" title="文字"></a>文字</h3><p><font color="#0099ff" face="STCAIYUN" size="4">忙时专注，闲时自省，警惕忙无章法，闲生杂念</font><br></p>
<p><font color="#008B8B" face="微软雅黑" size="2">忙时专注，闲时自省，警惕忙无章法，闲生杂念</font><br></p>
<p><font color="#B22222" face="黑体" size="5">忙时专注，闲时自省，警惕忙无章法，闲生杂念</font><br></p>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Service</span>(version = <span class="string">"1.0.0"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CityDubboServiceImpl</span> <span class="keyword">implements</span> <span class="title">CityDubboService</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> City <span class="title">findCityByName</span><span class="params">(String cityName)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> City(<span class="number">1L</span>,<span class="number">2L</span>,<span class="string">"日照"</span>,<span class="string">"是Htime的故乡"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="区段"><a href="#区段" class="headerlink" title="区段"></a>区段</h2><h3 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h3><p><a href="http://blog.zeyu0633.com/">Htime</a></p>
<h3 id="插入图片"><a href="#插入图片" class="headerlink" title="插入图片"></a>插入图片</h3><p><img src="http://upload-images.jianshu.io/upload_images/4943424-f3592b168de473a2.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="测试图片用路飞"></p>
      
    </div>
    
    <div class="article-info article-info-index">
      
      <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/markkdown/">markkdown</a>
    </div>
      <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/技能/">技能</a></li></ul>
    </div>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>
  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/">Next &raquo;</a>
    </nav></div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2017 Htime
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style="display:none">
                        <span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style="display:none">
                        <span id="page-visit" title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    <script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>




<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide()" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
